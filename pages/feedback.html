<!--This is not a independent page-->
<!--It will be add in to a <div> element-->
<!--no need to start with <!DOCTYPE html> <html> <head> <body> tags-->
<style>
    .feedback-page {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        padding: 48px;
        height: 100%;
    }

    .feedback-page h1 {
        font-size: 36px;
        margin-bottom: 20px;
        text-align: center;
    }
</style>
<div class="feedback-page usingFormDefaultStyle">
    <div class="form-container">
        <h1>意見反饋表</h1>
        <p>您的意見對我們很重要，幫助我們改進服務。</p>
        <form id="feedback-form" action="#showFromValue" method="post" onsubmit="return doubleCheckAndSave(this)">
            <div class="form-input-group">
                <label for="name" class="form-label">姓名:</label>
                <input type="text" id="name" name="name" placeholder="輸入您的姓名" class="form-input"
                    autocomplete="off" required><br><br>
            </div>

            <div class="form-input-group">
                <label for="email" class="form-label">電子郵件:</label>
                <input type="email" id="email" name="email" placeholder="輸入您的電郵" class="form-input"
                    required><br><br>
            </div>
            
            <div class="form-input-group">
                <label for="service" class="form-label">服務類別：</label>
                <select id="service" name="service" class="form-input" required>
                    <option value="">請選擇服務類別</option>
                    <option value="maintenance">汽車維修</option>
                    <option value="washing">洗車服務</option>
                    <option value="parts">配件銷售</option>
                    <option value="inspection">汽車檢測</option>
                    <option value="other">其他</option>
                </select><br><br>
            </div>

            <div class="form-input-group">
                <label for="comments" class="form-label">意見反饋:</label>
                <textarea id="comments" name="comments" rows="15" cols="50" placeholder="請在此輸入您的寶貴意見..."
                    class="form-textarea" required></textarea><br><br>
            </div>

            <input type="submit" value="提交反饋" class="form-submit-button">
        </form>
    </div>
</div>
<script>
    function doubleCheckAndSave(form) {
        const name = form.name.value.trim();
        const email = form.email.value.trim();
        const service = form.service.value;
        const comments = form.comments.value.trim();

        if (!name || !email || !service || !comments) {
            alert("請填寫所有必填欄位。");
            return false;
        }

        if (!validator.isEmail(email)) {
            alert("電子郵件地址無效\n請輸入有效的電子郵件地址。");
            return false;
        }

        const confirmation = confirm(`請確認您的反饋內容：\n\n姓名: ${name}\n電子郵件: ${email}\n服務類別: ${service}\n意見反饋: ${comments}\n\n是否提交？`);
        if (confirmation) {
            alert("感謝您的反饋！");
            sessionStorage.setItem('submittedItems', ['Name', 'Email', 'Service', 'Comments']);
            sessionStorage.setItem('Name', name);
            sessionStorage.setItem('Email', email);
            sessionStorage.setItem('Service', service);
            sessionStorage.setItem('Comments', comments);
            // Here you can add code to actually save the feedback, e.g., send it to a server
            return true; // Proceed with form submission
        } else {
            return false; // Cancel form submission
        }
    }
</script>